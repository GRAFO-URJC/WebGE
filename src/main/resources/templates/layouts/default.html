<!DOCTYPE html>
<html>
<head>
    <div th:include="fragments/header :: head" th:remove="tag"></div>
    <script>
        let table;

        function tableDefinition(id, idTableBody, target1, target2, targetChill) {
            table = $(id).DataTable({
                "paging": true,
                "columnDefs": [{
                    "targets": [target1, target2],
                    "orderable": false
                }]
            });
            $('.dataTables_length').addClass('bs-select');


            $(idTableBody).on('click', 'td.details-control', function () {
                let tr = $(this).closest('tr');
                let row = table.row(tr);
                if (row.child.isShown()) {
                    // This row is already open - close it
                    $('div.slider', row.child()).slideUp(function () {
                        row.child.hide();
                        //tr.removeClass('shown');
                    });
                } else {
                    // Open this row
                    row.child(format(row.data(), targetChill)).show();
                    tr.addClass('shown');
                    $('div.slider', row.child()).slideDown();
                }
            });
        }

        function format(d, target) {
            // `d` is the original data object for the row 7
            return '<div class="slider" style="display: none;">' +
                d[target] +
                '</div>';
        }
    </script>
</head>
<body>

<div th:fragment="menu">
    <header class="navbar navbar-default navbar-static-top" id="header">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".header-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                </button>
                <!-- user redirect-->
                <a class="navbar-brand" sec:authorize="hasRole('ROLE_USER')" th:href="@{/}">WebGE <i>by URJC</i></a>
                <!-- admin redirect-->
                <a class="navbar-brand" sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/admin}">WebGE <i>by URJC</i></a>
            </div>

            <div class="collapse navbar-collapse header-collapse">
                <!-- USER HEADER -->
                <ul sec:authorize="hasRole('ROLE_USER')" class="nav navbar-nav">
                    <li><a th:href="@{/}"><span class="glyphicon glyphicon-home" rel="tooltip" title="Home page"></span></a>
                    </li>
                    <li><a th:href="@{/experiment/configExperiment}" rel="tooltip" title="New experiment"><span
                            class="glyphicon glyphicon glyphicon-plus-sign"></span></a></li>
                    <li><a th:href="@{/experiment/experimentRepository}" rel="tooltip" title="List of experiments"><span
                            class="glyphicon glyphicon-th-list"></span></a></li>
                    <li><a th:href="@{/user/profile}" rel="tooltip" title="User profile"><span
                            class="glyphicon glyphicon-user"></span></a></li>
                </ul>

                <!-- ADMIN HEADER-->
                <ul sec:authorize="hasRole('ROLE_ADMIN')" class="nav navbar-nav">
                    <li><a th:href="@{/admin}"><span class="glyphicon glyphicon-home" rel="tooltip"
                                                     title="Home page"></span></a>
                    </li>
                    <li><a th:href="@{/admin/registrationPage}" rel="tooltip" title="Register user">
                        <span class="icon-combine">
                            <span class="glyphicon glyphicon-plus-sign"></span>
                            <span class="glyphicon glyphicon-user"></span>
                        </span>
                    </a></li>
                    <li><a th:href="@{/admin/userList}" rel="tooltip" title="List of users"><span
                            class="glyphicon glyphicon-th-list"></span></a></li>
                    <li><a th:href="@{/admin/profile}" rel="tooltip" title="User profile"><span
                            class="glyphicon glyphicon-user"></span></a></li>
                </ul>

                <a th:href="@{/logout}"><p sec:authorize="isAuthenticated()"
                                           class="navbar-text navbar-right btn-sm btn btn-default" rel="tooltip"
                                           title="Log out">
                    <span style="color:#4183c4" class="glyphicon glyphicon-off"></span></p></a>

                <a th:href="@{/user}"><p sec:authorize="isAnonymous()"
                                         class="navbar-text navbar-right btn-sm btn btn-default"><span
                        style="color:#4183c4" class="glyphicon glyphicon-log-in" rel="tooltip"
                        title="Log in"></span></p></a>

            </div>
        </div>
    </header>
</div>

<div layout:fragment="wrapper" class="wrapper">
    <div layout:fragment="content">
    </div>
    <div th:include="fragments/footer :: footer"></div>
</div>

</body>
